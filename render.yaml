services:
  - type: web
    name: django-backend
    env: docker
    plan: free
    buildCommand: ""
    startCommand: gunicorn backend.wsgi:application --bind 0.0.0.0:8000
    postDeployCommand: |
      set -e
      python manage.py migrate
      python manage.py shell -c "
from django.contrib.auth.models import User;
username='admin';
password='admin123';
email='admin@example.com';
if not User.objects.filter(username=username).exists():
    User.objects.create_superuser(username, email, password)
"
